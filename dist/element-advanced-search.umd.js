(function(b,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],r):(b=typeof globalThis<"u"?globalThis:b||self,r(b.ElementAdvancedSearch={},b.Vue,b.ElementPlus))})(this,function(b,r,W){"use strict";const J={class:"advanced-search"},G={class:"main-search-bar"},z={class:"filter-button-wrapper"},H={class:"advanced-search-form-popover"},Q=["data-field"],X={key:9,class:"numberrange-container"},Y={key:0,class:"search-tags"},Z=r.defineComponent({__name:"index",props:{searchConfig:{},quickSearchField:{default:"keyword"},quickSearchPlaceholder:{default:"请输入搜索关键词"},modelValue:{default:()=>({})},cacheKey:{default:""}},emits:["search","update:modelValue"],setup(A,{emit:B}){let g=null;const d=A,h=B,ee=r.ref(null),S=r.ref(!1),u=r.ref(""),s=r.ref({}),y=r.ref([]),v=r.ref({}),_=r.ref({}),P=r.ref({}),F=(l,o)=>{const t=s.value[l];return Array.isArray(t)&&t.length>o?t[o]:null},E=(l,o,t)=>{Array.isArray(s.value[l])||(s.value[l]=[null,null]),s.value[l][o]=t,s.value={...s.value}};r.watch(()=>_.value,()=>{y.value.length>0&&y.value.some(o=>{const t=d.searchConfig.formItems.find(e=>e.field===o.key);return t&&(t.type==="select"||t.type==="treeselect")&&(t.remote||t.loadOptions)})&&(g&&clearTimeout(g),g=window.setTimeout(()=>{r.nextTick(()=>{$()})},100))},{deep:!0});const I=r.computed(()=>d.searchConfig.formItems.length>1),le=r.computed(()=>d.searchConfig.formItems.filter(l=>!l.hidden)),re=r.computed(()=>d.searchConfig.popoverWidth||800),x=r.computed(()=>d.cacheKey?`advancedSearch@${d.cacheKey}`:""),oe=l=>{v.value[l]=!0,r.nextTick(()=>{const o=document.querySelector(`[data-field=${l}] .form-item-textarea-overlay textarea`);o&&o.focus()})},U=l=>{try{if(l.type==="select"||l.type==="treeselect"){const o=l;return o.remote&&_.value[l.field]?_.value[l.field]:o.options||[]}return[]}catch(o){return console.error("Error getting select options:",o),[]}},te=l=>U(l),D=l=>{if(l.type==="treeselect"){const o=l;return o.props&&typeof o.props=="object"?o.props:{value:o.nodeKey||"id",label:"label",children:"children"}}return{}},ae=l=>{if(l.type!=="select"&&l.type!=="treeselect")return;const o=l;return async t=>{if(o.remoteMethod){P.value[l.field]=!0;try{const e=await o.remoteMethod(t);_.value[l.field]=e}catch(e){console.error(`Failed to load remote options for ${l.field}:`,e)}finally{P.value[l.field]=!1}}}},O=l=>{if(x.value)try{localStorage.setItem(x.value,JSON.stringify({searchParams:l,timestamp:Date.now()}))}catch(o){console.warn("Failed to save search cache:",o)}},ne=()=>{if(!x.value)return null;try{const l=localStorage.getItem(x.value);if(l){const o=JSON.parse(l),t=Date.now(),e=24*60*60*1e3;return t-o.timestamp>e?(w(),null):o.searchParams||null}}catch(l){console.warn("Failed to get search cache:",l),w()}return null},w=()=>{if(x.value)try{localStorage.removeItem(x.value)}catch(l){console.warn("Failed to clear search cache:",l)}},$=()=>{const l={};u.value&&(l[d.quickSearchField]=u.value),Object.assign(l,s.value);const o=y.value,t=[];u.value&&t.push({key:d.quickSearchField,label:"关键词",value:u.value});for(const e of d.searchConfig.formItems){const n=l[e.field];n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&(e.type==="numberrange"?Array.isArray(n)&&(n[0]!==null||n[1]!==null)&&t.push({key:e.field,label:e.label,value:n}):e.type==="daterange"?Array.isArray(n)&&n.length===2&&(n[0]!==null||n[1]!==null)&&t.push({key:e.field,label:e.label,value:n}):e.field!==d.quickSearchField&&t.push({key:e.field,label:e.label,value:n}))}se(o,t)||(y.value=t)},se=(l,o)=>l.length!==o.length?!1:l.every((t,e)=>{const n=o[e];return t.key===n.key&&t.label===n.label&&JSON.stringify(t.value)===JSON.stringify(n.value)}),ce=()=>{},ie=()=>{S.value=!1},q=()=>{const l={};u.value&&(l[d.quickSearchField]=u.value),Object.assign(l,s.value),C(l),O(l),h("update:modelValue",l),h("search",l)},j=()=>{const l={};u.value&&(l[d.quickSearchField]=u.value),Object.assign(l,s.value),C(l),O(l),ie(),h("update:modelValue",l),h("search",l)},R=()=>{const l={},o={};for(const e of d.searchConfig.formItems)if(e.type==="custom")o[e.field]=e.default!==void 0?e.default:"";else if(e.type==="checkbox")o[e.field]=[];else if(e.type==="daterange"||e.type==="numberrange")o[e.field]=[];else if(e.type==="treeselect"){const n=e;o[e.field]=n.multiple?[]:""}else if(e.type==="select"){const n=e;o[e.field]=n.multiple?[]:""}else e.type==="textarea"?(o[e.field]=e.default??"",l[e.field]=!1):e.type==="number"?o[e.field]=e.default??null:o[e.field]=e.default??"";s.value=o,v.value=l,y.value=[],w();const t={};u.value&&(t[d.quickSearchField]=u.value),h("update:modelValue",t),h("search",t)},C=l=>{try{const o=[];u.value&&o.push({key:d.quickSearchField,label:"关键词",value:u.value});for(const t of d.searchConfig.formItems){const e=l[t.field];e!=null&&e!==""&&!(Array.isArray(e)&&e.length===0)&&(t.type==="numberrange"?Array.isArray(e)&&(e[0]!==null||e[1]!==null)&&o.push({key:t.field,label:t.label,value:e}):t.type==="daterange"?Array.isArray(e)&&e.length===2&&(e[0]!==null||e[1]!==null)&&o.push({key:t.field,label:t.label,value:e}):t.field!==d.quickSearchField&&o.push({key:t.field,label:t.label,value:e}))}y.value=o}catch(o){console.error("Error updating search tags:",o),y.value=[]}},de=(l,o,t)=>{const e=t.value||"id",n=t.label||"label",c=[];for(const f of l){const m=V(o,f,e);m&&m.hasOwnProperty(n)?c.push(m[n]):c.push(String(f))}return c.join(", ")},fe=(l,o,t)=>{const e=t.value||"id",n=t.label||"label",c=V(o,l,e);return c&&c.hasOwnProperty(n)?c[n]:String(l)},V=(l,o,t)=>{for(const e of l){if(e.hasOwnProperty(t)){const n=e[t];if(String(n)===String(o))return e}if(e.children&&e.children.length>0){const n=V(e.children,o,t);if(n)return n}}return null},ue=l=>{const o=d.searchConfig.formItems.find(t=>t.field===l.key);if(o&&o.displayValue)try{return o.displayValue(l.value,s.value)||String(l.value)}catch(t){return console.error("Error in custom displayValue function:",t),String(l.value)}if(o&&(o.type==="select"||o.type==="treeselect")&&(o.options||_.value[o.field])){const t=o,e=t.remote?_.value[o.field]:t.options;try{if(o.type==="treeselect"){const n=D(o);return Array.isArray(l.value)?de(l.value,e||[],n):fe(l.value,e||[],n)}else{if(Array.isArray(l.value))return l.value.map(f=>{const m=V(e||[],f,"value");return m?m.label:String(f)}).filter(f=>f!==void 0&&f!=="undefined"&&f!=="null"&&f!=="").join(", ")||(l.value.length?l.value.join(", "):"");{const n=V(e||[],l.value,"value");return(n?n.label:String(l.value))||String(l.value)}}}catch(n){return console.error("Error processing select/treeselect display value:",n),Array.isArray(l.value)?l.value.join(", "):String(l.value)}}if(o&&(o.type==="radio"||o.type==="checkbox")&&o.options)try{if(Array.isArray(l.value))return l.value.map(t=>{var n;const e=(n=o.options)==null?void 0:n.find(c=>c.value===t);return e?e.label:t}).join(", ");{const t=o.options.find(e=>e.value===l.value);return t?t.label:l.value}}catch(t){return console.error("Error processing radio/checkbox display value:",t),Array.isArray(l.value)?l.value.join(", "):String(l.value)}if(o&&o.type==="daterange"&&Array.isArray(l.value))try{if(l.value.length===2){const[t,e]=l.value;if(t!==null&&e!==null)return`${k(t)} ~ ${k(e)}`;if(t!==null)return`≥ ${k(t)}`;if(e!==null)return`≤ ${k(e)}`}return""}catch(t){return console.error("Error processing daterange display value:",t),""}if(o&&o.type==="date")try{return l.value?k(l.value):""}catch(t){return console.error("Error processing date display value:",t),""}if(o&&o.type==="numberrange"&&Array.isArray(l.value))try{const[t,e]=l.value;return t!==null&&e!==null?`${t} - ${e}`:t!==null?`≥ ${t}`:e!==null?`≤ ${e}`:""}catch(t){return console.error("Error processing numberrange display value:",t),""}if(o&&o.type==="timerange"&&Array.isArray(l.value))try{const[t,e]=l.value;return t&&e?`${t} ~ ${e}`:t?`≥ ${t}`:e?`≤ ${e}`:""}catch(t){return console.error("Error processing timerange display value:",t),""}if(o&&o.type==="time")try{return l.value?String(l.value):""}catch(t){return console.error("Error processing time display value:",t),""}return String(l.value)},k=l=>{if(l instanceof Date)return l.toLocaleDateString();if(typeof l=="string"||typeof l=="number"){const o=new Date(l);return isNaN(o.getTime())?String(l):o.toLocaleDateString()}return String(l)},pe=l=>{if(l===d.quickSearchField)u.value="";else{const o=d.searchConfig.formItems.find(t=>t.field===l);if(o)if(o.type==="checkbox")s.value[l]=[];else if(o.type==="daterange"||o.type==="numberrange")s.value[l]=[];else if(o.type==="select"||o.type==="treeselect"){const t=o;s.value[l]=t.multiple?[]:""}else o.type==="number"?s.value[l]=null:o.type==="timerange"?s.value[l]=[]:o.type==="time"?s.value[l]=null:s.value[l]="";else s.value[l]=""}j()},me=()=>{u.value="",R()},he=async()=>{const l=[];for(const o of d.searchConfig.formItems)if((o.type==="select"||o.type==="treeselect")&&o.loadOptions){const t=o,e=(async()=>{try{const n=await t.loadOptions();_.value[o.field]=n}catch(n){console.error(`Failed to load options for ${o.field}:`,n)}})();l.push(e)}l.length>0&&(await Promise.all(l),y.value.length>0&&(g&&clearTimeout(g),g=window.setTimeout(()=>{r.nextTick(()=>{$()})},100)))},p=(l,o,t)=>{const e={};if(l.hasOwnProperty("elProps")){const n=l;n.elProps&&(typeof n.elProps=="function"?Object.assign(e,n.elProps(o,t)):typeof n.elProps=="object"&&n.elProps[o]?Object.assign(e,n.elProps[o]):typeof n.elProps=="object"&&!Array.isArray(n.elProps)&&Object.keys(n.elProps).length>0&&Object.assign(e,n.elProps))}return e};return r.watch(()=>d.modelValue,l=>{if(l){u.value=l[d.quickSearchField]||"";const o={...s.value};let t=!1;Object.keys(l).forEach(e=>{if(e!==d.quickSearchField){const n=d.searchConfig.formItems.find(c=>c.field===e);if(n&&n.type==="checkbox"&&!Array.isArray(l[e]))o[e]=l[e]?[l[e]]:[],t=!0;else if(n&&n.type==="daterange"&&l[e])Array.isArray(l[e])?(o[e]=l[e].map(c=>{if(c instanceof Date)return c;if(typeof c=="string"||typeof c=="number"){const f=new Date(c);return isNaN(f.getTime())?c:f}return c}),t=!0):(o[e]=[],t=!0);else if(n&&n.type==="numberrange"&&l[e])Array.isArray(l[e])?(o[e]=l[e],t=!0):(o[e]=[null,null],t=!0);else if(n&&n.type==="number"){let c=l[e];typeof c=="string"&&c!==""&&!isNaN(Number(c))?c=Number(c):(c===""||c===void 0)&&(c=null),o[e]!==c&&(o[e]=c,t=!0)}else n&&n.type==="timerange"&&l[e]?Array.isArray(l[e])?(o[e]=l[e],t=!0):(o[e]=[],t=!0):n&&n.type==="time"?o[e]!==l[e]&&(o[e]=l[e],t=!0):n&&n.type==="custom"&&typeof n.default=="number"&&l[e]===""?(o[e]=n.default,t=!0):o[e]!==l[e]&&(o[e]=l[e],t=!0)}}),t&&(s.value=o),C(l)}},{immediate:!0,deep:!0}),r.onMounted(()=>{const l={},o={};for(const e of d.searchConfig.formItems)if(e.type==="custom")l[e.field]=e.default!==void 0?e.default:"";else if(e.type==="checkbox")l[e.field]=Array.isArray(e.default)?e.default:[];else if(e.type==="treeselect"){const n=e;l[e.field]=n.multiple?Array.isArray(e.default)?e.default:[]:e.default??""}else if(e.type==="select"){const n=e;l[e.field]=n.multiple?Array.isArray(e.default)?e.default:[]:e.default??""}else e.type==="daterange"?l[e.field]=Array.isArray(e.default)?e.default:[]:e.type==="numberrange"?l[e.field]=Array.isArray(e.default)?e.default:[null,null]:e.type==="textarea"?(l[e.field]=e.default??"",o[e.field]=!1):e.type==="number"?l[e.field]=e.default??null:e&&e.type==="timerange"?l[e.field]=Array.isArray(e.default)?e.default:[]:e&&e.type==="time"?l[e.field]=e.default??null:l[e.field]=e.default??"";s.value=l,v.value=o;const t=ne();if(t){u.value=t[d.quickSearchField]||"",Object.keys(t).forEach(n=>{if(n!==d.quickSearchField){const c=d.searchConfig.formItems.find(f=>f.field===n);if(c&&c.type==="checkbox"&&!Array.isArray(t[n]))l[n]=t[n]?[t[n]]:[];else if(c&&c.type==="date"&&t[n])if(typeof t[n]=="string"||typeof t[n]=="number"){const f=new Date(t[n]);l[n]=isNaN(f.getTime())?t[n]:f}else l[n]=t[n];else c&&c.type==="daterange"&&t[n]?Array.isArray(t[n])?l[n]=t[n].map(f=>{if(f instanceof Date)return f;if(typeof f=="string"||typeof f=="number"){const m=new Date(f);return isNaN(m.getTime())?f:m}return f}):l[n]=[]:c&&c.type==="numberrange"&&t[n]?Array.isArray(t[n])?l[n]=t[n]:l[n]=[null,null]:c&&c.type==="timerange"&&t[n]?Array.isArray(t[n])?l[n]=t[n]:l[n]=[]:(c&&c.type==="time"&&t[n],l[n]=t[n])}}),s.value=l;const e={};u.value&&(e[d.quickSearchField]=u.value),Object.assign(e,s.value),C(e),h("update:modelValue",e),h("search",e)}he()}),(l,o)=>{const t=r.resolveComponent("el-input"),e=r.resolveComponent("el-button"),n=r.resolveComponent("el-option"),c=r.resolveComponent("el-select"),f=r.resolveComponent("el-tree-select"),m=r.resolveComponent("el-radio"),ye=r.resolveComponent("el-radio-group"),be=r.resolveComponent("el-checkbox"),ge=r.resolveComponent("el-checkbox-group"),K=r.resolveComponent("el-date-picker"),N=r.resolveComponent("el-input-number"),L=r.resolveComponent("el-time-picker"),M=r.resolveComponent("el-form-item"),_e=r.resolveComponent("el-col"),ve=r.resolveComponent("el-row"),xe=r.resolveComponent("el-popover"),Se=r.resolveComponent("el-tag");return r.openBlock(),r.createElementBlock("div",J,[r.createElementVNode("div",G,[r.createVNode(t,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=a=>u.value=a),placeholder:l.quickSearchPlaceholder,class:"quick-search-input",onKeyup:r.withKeys(q,["enter"])},null,8,["modelValue","placeholder"]),r.createVNode(e,{type:"primary",icon:"Search",onClick:q,class:"search-button"},{default:r.withCtx(()=>o[2]||(o[2]=[r.createTextVNode(" 搜索 ",-1)])),_:1,__:[2]}),r.createElementVNode("div",z,[I.value?(r.openBlock(),r.createBlock(xe,{key:0,visible:S.value,"onUpdate:visible":o[1]||(o[1]=a=>S.value=a),placement:"bottom-end",width:re.value,trigger:"click","popper-class":"advanced-search-popover",teleported:!0,"hide-after":0,persistent:!1,"show-arrow":!1},{reference:r.withCtx(()=>[I.value?(r.openBlock(),r.createBlock(e,{key:0,ref:"filterButtonRef",onClick:ce,icon:S.value?"ArrowUp":"ArrowDown",class:"filter-button"},{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(S.value?"收起筛选":"更多筛选"),1)]),_:1},8,["icon"])):r.createCommentVNode("",!0)]),default:r.withCtx(()=>[r.createElementVNode("div",H,[r.createVNode(r.unref(W.ElForm),{ref_key:"advancedFormRef",ref:ee,model:s.value,"label-width":l.searchConfig.labelWidth||"100px",inline:l.searchConfig.inline!==!1,class:"advanced-form"},{default:r.withCtx(()=>[r.createVNode(ve,{gutter:20},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(le.value,a=>(r.openBlock(),r.createBlock(_e,{key:a.field,span:24/(l.searchConfig.itemsPerRow||2),class:"advanced-form-item-col"},{default:r.withCtx(()=>[r.createVNode(M,{label:a.label,prop:a.field,class:"advanced-form-item"},{default:r.withCtx(()=>[a.type==="input"||!a.type?(r.openBlock(),r.createBlock(t,r.mergeProps({key:0,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.placeholder||`请输入${a.label}`,clearable:a.clearable!==!1,class:"form-item-input"},{ref_for:!0},p(a,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable"])):a.type==="textarea"?(r.openBlock(),r.createElementBlock("div",{key:1,class:"textarea-container","data-field":a.field},[r.withDirectives(r.createVNode(t,r.mergeProps({modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.shortPlaceholder||a.placeholder||`请输入${a.label}`,clearable:a.clearable!==!1,class:"form-item-input",onFocus:i=>oe(a.field)},{ref_for:!0},p(a,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","onFocus"]),[[r.vShow,!v.value[a.field]]]),r.withDirectives(r.createVNode(t,r.mergeProps({modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.longPlaceholder||a.placeholder||`请输入${a.label}`,clearable:a.clearable!==!1,type:"textarea",autosize:{minRows:2,maxRows:4},class:"form-item-textarea-overlay",teleported:!0,onBlur:()=>{v.value[a.field]=!1}},{ref_for:!0},p(a,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","onBlur"]),[[r.vShow,v.value[a.field]]])],8,Q)):a.type==="select"?(r.openBlock(),r.createBlock(c,r.mergeProps({key:2,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.placeholder||`请选择${a.label}`,clearable:a.clearable!==!1,multiple:a.multiple,filterable:a.filterable,remote:a.remote,"remote-method":a.remote?ae(a):void 0,loading:P.value[a.field]||!1,class:"form-item-select",teleported:!1,"reserve-keyword":""},{ref_for:!0},p(a,"select")),{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(U(a),i=>(r.openBlock(),r.createBlock(n,r.mergeProps({key:i.value,label:i.label,value:i.value},{ref_for:!0},p(a,"option",i)),null,16,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","placeholder","clearable","multiple","filterable","remote","remote-method","loading"])):a.type==="treeselect"?(r.openBlock(),r.createBlock(f,r.mergeProps({key:3,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.placeholder||`请选择${a.label}`,clearable:a.clearable!==!1,multiple:a.multiple,data:te(a),"node-key":a.nodeKey||"id",props:D(a),"show-checkbox":a.showCheckbox,filterable:a.filterable,teleported:!1,"popper-options":{placement:"bottom-start"},style:{"--el-tree-select-dropdown-max-height":(a.maxDropdownHeight||300)+"px"},"render-after-expand":!1,loading:P.value[a.field]||!1},{ref_for:!0},p(a,"treeSelect")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","multiple","data","node-key","props","show-checkbox","filterable","style","loading"])):a.type==="radio"?(r.openBlock(),r.createBlock(ye,r.mergeProps({key:4,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,class:"form-item-radio"},{ref_for:!0},p(a,"radioGroup")),{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(a.options,i=>(r.openBlock(),r.createBlock(m,r.mergeProps({key:i.value,value:i.value,class:"form-item-radio-option"},{ref_for:!0},p(a,"radio",i)),{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(i.label),1)]),_:2},1040,["value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):a.type==="checkbox"?(r.openBlock(),r.createBlock(ge,r.mergeProps({key:5,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,class:"form-item-checkbox"},{ref_for:!0},p(a,"checkboxGroup")),{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(a.options,i=>(r.openBlock(),r.createBlock(be,r.mergeProps({key:i.value,value:i.value,class:"form-item-checkbox-option"},{ref_for:!0},p(a,"checkbox",i)),{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(i.label),1)]),_:2},1040,["value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):a.type==="date"?(r.openBlock(),r.createBlock(K,r.mergeProps({key:6,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,type:"date",placeholder:a.placeholder||`请选择${a.label}`,clearable:a.clearable!==!1,class:"form-item-date",teleported:!1},{ref_for:!0},p(a,"datePicker")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable"])):a.type==="daterange"?(r.openBlock(),r.createBlock(K,r.mergeProps({key:7,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,type:"daterange","start-placeholder":a.startPlaceholder||"开始日期","end-placeholder":a.endPlaceholder||"结束日期",clearable:a.clearable!==!1,class:"form-item-daterange",teleported:!1,"range-separator":"至"},{ref_for:!0},p(a,"datePicker")),null,16,["modelValue","onUpdate:modelValue","start-placeholder","end-placeholder","clearable"])):a.type==="number"?(r.openBlock(),r.createBlock(N,r.mergeProps({key:8,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,min:a.min,max:a.max,placeholder:a.placeholder||`请输入${a.label}`,"controls-position":a.controlsPosition||"right",class:"form-item-number"},{ref_for:!0},p(a,"inputNumber")),null,16,["modelValue","onUpdate:modelValue","min","max","placeholder","controls-position"])):a.type==="numberrange"?(r.openBlock(),r.createElementBlock("div",X,[r.createVNode(N,r.mergeProps({"model-value":F(a.field,0),min:a.min,max:a.max,placeholder:a.minPlaceholder||"最小值","controls-position":a.controlsPosition||"right",class:"form-item-number","onUpdate:modelValue":i=>E(a.field,0,i??null)},{ref_for:!0},p(a,"inputNumber")),null,16,["model-value","min","max","placeholder","controls-position","onUpdate:modelValue"]),o[3]||(o[3]=r.createElementVNode("span",{class:"range-separator"},"-",-1)),r.createVNode(N,r.mergeProps({"model-value":F(a.field,1),min:a.min,max:a.max,placeholder:a.maxPlaceholder||"最大值","controls-position":a.controlsPosition||"right",class:"form-item-number","onUpdate:modelValue":i=>E(a.field,1,i??null)},{ref_for:!0},p(a,"inputNumber")),null,16,["model-value","min","max","placeholder","controls-position","onUpdate:modelValue"])])):a.type==="time"?(r.openBlock(),r.createBlock(L,r.mergeProps({key:10,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,placeholder:a.placeholder||`请选择${a.label}`,clearable:a.clearable!==!1,format:a.format,class:"form-item-time",teleported:!1},{ref_for:!0},p(a,"timePicker")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","format"])):a.type==="timerange"?(r.openBlock(),r.createBlock(L,r.mergeProps({key:11,modelValue:s.value[a.field],"onUpdate:modelValue":i=>s.value[a.field]=i,"is-range":"","start-placeholder":a.startPlaceholder||"开始时间","end-placeholder":a.endPlaceholder||"结束时间",clearable:a.clearable!==!1,format:a.format,class:"form-item-timerange",teleported:!1,"range-separator":"至"},{ref_for:!0},p(a,"timePicker")),null,16,["modelValue","onUpdate:modelValue","start-placeholder","end-placeholder","clearable","format"])):a.type==="custom"?r.renderSlot(l.$slots,a.slotName||a.field,{key:12,model:s.value,field:a.field},void 0,!0):r.createCommentVNode("",!0)]),_:2},1032,["label","prop"])]),_:2},1032,["span"]))),128))]),_:3}),r.createVNode(M,{class:"advanced-form-actions","label-width":l.searchConfig.labelWidth||"100px",label:" "},{default:r.withCtx(()=>[r.createVNode(e,{type:"primary",icon:"Search",onClick:j},{default:r.withCtx(()=>o[4]||(o[4]=[r.createTextVNode(" 搜索 ",-1)])),_:1,__:[4]}),r.createVNode(e,{onClick:R,icon:"Refresh"},{default:r.withCtx(()=>o[5]||(o[5]=[r.createTextVNode(" 重置 ",-1)])),_:1,__:[5]})]),_:1},8,["label-width"])]),_:3},8,["model","label-width","inline"])])]),_:3},8,["visible","width"])):r.createCommentVNode("",!0)])]),y.value.length>0?(r.openBlock(),r.createElementBlock("div",Y,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(y.value,a=>(r.openBlock(),r.createBlock(Se,{key:a.key,closable:"",onClose:i=>pe(a.key),class:"search-tag"},{default:r.withCtx(()=>[r.createTextVNode(r.toDisplayString(a.label)+": "+r.toDisplayString(ue(a)),1)]),_:2},1032,["onClose"]))),128)),r.createVNode(e,{type:"primary",link:"",onClick:me,class:"clear-all-tags"},{default:r.withCtx(()=>o[6]||(o[6]=[r.createTextVNode(" 清除所有 ",-1)])),_:1,__:[6]})])):r.createCommentVNode("",!0)])}}}),Ve="",ke="",T=((A,B)=>{const g=A.__vccOpts||A;for(const[d,h]of B)g[d]=h;return g})(Z,[["__scopeId","data-v-cbe75641"]]);b.ElementAdvancedSearch=T,b.default=T,Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});

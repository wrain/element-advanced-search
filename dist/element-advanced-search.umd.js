(function(g,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):(g=typeof globalThis<"u"?globalThis:g||self,e(g.ElementAdvancedSearch={},g.Vue,g.ElementPlus))})(this,function(g,e,X){"use strict";const Y={class:"advanced-search"},Z={class:"main-search-bar"},ee={class:"filter-button-wrapper"},le={class:"advanced-search-form-popover"},re=["data-field"],te={key:9,class:"numberrange-container"},oe={key:0,class:"search-tags"},ae={key:0,class:"search-tags teleported-tags"},ne=e.defineComponent({__name:"index",props:{searchConfig:{},quickSearchField:{default:"keyword"},quickSearchPlaceholder:{default:"请输入搜索关键词"},modelValue:{default:()=>({})},cacheKey:{default:""},teleportTo:{default:void 0}},emits:["search","update:modelValue"],setup(C,{emit:w}){let b=null;const d=C,y=w,se=e.ref(null),x=e.ref(!1),u=e.ref(""),s=e.ref({}),m=e.ref([]),k=e.ref({}),_=e.ref({}),A=e.ref({}),U=(r,t)=>{const a=s.value[r];return Array.isArray(a)&&a.length>t?a[t]:null},D=(r,t,a)=>{Array.isArray(s.value[r])||(s.value[r]=[null,null]),s.value[r][t]=a,s.value={...s.value}};e.watch(()=>_.value,()=>{m.value.length>0&&m.value.some(t=>{const a=d.searchConfig.formItems.find(l=>l.field===t.key);return a&&(a.type==="select"||a.type==="treeselect")&&(a.remote||a.loadOptions)})&&(b&&clearTimeout(b),b=window.setTimeout(()=>{e.nextTick(()=>{K()})},100))},{deep:!0});const P=e.ref(!1),$=e.computed(()=>d.teleportTo&&P.value);e.onMounted(()=>{d.teleportTo&&e.nextTick(()=>{P.value=!!document.querySelector(d.teleportTo)})}),e.watch(()=>d.teleportTo,r=>{r?setTimeout(()=>{P.value=!!document.querySelector(r)},0):P.value=!1});const O=e.computed(()=>d.searchConfig.formItems.length>1),ce=e.computed(()=>d.searchConfig.formItems.filter(r=>!r.hidden)),ie=e.computed(()=>d.searchConfig.popoverWidth||800),S=e.computed(()=>d.cacheKey?`advancedSearch@${d.cacheKey}`:""),de=r=>{k.value[r]=!0,e.nextTick(()=>{const t=document.querySelector(`[data-field=${r}] .form-item-textarea-overlay textarea`);t&&t.focus()})},q=r=>{try{if(r.type==="select"||r.type==="treeselect"){const t=r;return t.remote&&_.value[r.field]?_.value[r.field]:t.options||[]}return[]}catch(t){return console.error("Error getting select options:",t),[]}},fe=r=>q(r),j=r=>{if(r.type==="treeselect"){const t=r;return t.props&&typeof t.props=="object"?t.props:{value:t.nodeKey||"id",label:"label",children:"children"}}return{}},ue=r=>{if(r.type!=="select"&&r.type!=="treeselect")return;const t=r;return async a=>{if(t.remoteMethod){A.value[r.field]=!0;try{const l=await t.remoteMethod(a);_.value[r.field]=l}catch(l){console.error(`Failed to load remote options for ${r.field}:`,l)}finally{A.value[r.field]=!1}}}},R=r=>{if(S.value)try{localStorage.setItem(S.value,JSON.stringify({searchParams:r,timestamp:Date.now()}))}catch(t){console.warn("Failed to save search cache:",t)}},pe=()=>{if(!S.value)return null;try{const r=localStorage.getItem(S.value);if(r){const t=JSON.parse(r),a=Date.now(),l=24*60*60*1e3;return a-t.timestamp>l?(F(),null):t.searchParams||null}}catch(r){console.warn("Failed to get search cache:",r),F()}return null},F=()=>{if(S.value)try{localStorage.removeItem(S.value)}catch(r){console.warn("Failed to clear search cache:",r)}},K=()=>{const r={};u.value&&(r[d.quickSearchField]=u.value),Object.assign(r,s.value);const t=m.value,a=[];u.value&&a.push({key:d.quickSearchField,label:"关键词",value:u.value});for(const l of d.searchConfig.formItems){const n=r[l.field];n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&(l.type==="numberrange"?Array.isArray(n)&&(n[0]!==null||n[1]!==null)&&a.push({key:l.field,label:l.label,value:n}):l.type==="daterange"?Array.isArray(n)&&n.length===2&&(n[0]!==null||n[1]!==null)&&a.push({key:l.field,label:l.label,value:n}):l.field!==d.quickSearchField&&a.push({key:l.field,label:l.label,value:n}))}me(t,a)||(m.value=a)},me=(r,t)=>r.length!==t.length?!1:r.every((a,l)=>{const n=t[l];return a.key===n.key&&a.label===n.label&&JSON.stringify(a.value)===JSON.stringify(n.value)}),he=()=>{},ye=()=>{x.value=!1},L=()=>{const r={};u.value&&(r[d.quickSearchField]=u.value),Object.assign(r,s.value),B(r),R(r),y("update:modelValue",r),y("search",r)},M=()=>{const r={};u.value&&(r[d.quickSearchField]=u.value),Object.assign(r,s.value),B(r),R(r),ye(),y("update:modelValue",r),y("search",r)},W=()=>{const r={},t={};for(const l of d.searchConfig.formItems)if(l.type==="custom")t[l.field]=l.default!==void 0?l.default:"";else if(l.type==="checkbox")t[l.field]=[];else if(l.type==="daterange"||l.type==="numberrange")t[l.field]=[];else if(l.type==="treeselect"){const n=l;t[l.field]=n.multiple?[]:""}else if(l.type==="select"){const n=l;t[l.field]=n.multiple?[]:""}else l.type==="textarea"?(t[l.field]=l.default??"",r[l.field]=!1):l.type==="number"?t[l.field]=l.default??null:t[l.field]=l.default??"";s.value=t,k.value=r,m.value=[],F();const a={};u.value&&(a[d.quickSearchField]=u.value),y("update:modelValue",a),y("search",a)},B=r=>{try{const t=[];u.value&&t.push({key:d.quickSearchField,label:"关键词",value:u.value});for(const a of d.searchConfig.formItems){const l=r[a.field];l!=null&&l!==""&&!(Array.isArray(l)&&l.length===0)&&(a.type==="numberrange"?Array.isArray(l)&&(l[0]!==null||l[1]!==null)&&t.push({key:a.field,label:a.label,value:l}):a.type==="daterange"?Array.isArray(l)&&l.length===2&&(l[0]!==null||l[1]!==null)&&t.push({key:a.field,label:a.label,value:l}):a.field!==d.quickSearchField&&t.push({key:a.field,label:a.label,value:l}))}m.value=t}catch(t){console.error("Error updating search tags:",t),m.value=[]}},ge=(r,t,a)=>{const l=a.value||"id",n=a.label||"label",c=[];for(const f of r){const h=v(t,f,l);h&&h.hasOwnProperty(n)?c.push(h[n]):c.push(String(f))}return c.join(", ")},be=(r,t,a)=>{const l=a.value||"id",n=a.label||"label",c=v(t,r,l);return c&&c.hasOwnProperty(n)?c[n]:String(r)},v=(r,t,a)=>{for(const l of r){if(l.hasOwnProperty(a)){const n=l[a];if(String(n)===String(t))return l}if(l.children&&l.children.length>0){const n=v(l.children,t,a);if(n)return n}}return null},J=r=>{const t=d.searchConfig.formItems.find(a=>a.field===r.key);if(t&&t.displayValue)try{return t.displayValue(r.value,s.value)||String(r.value)}catch(a){return console.error("Error in custom displayValue function:",a),String(r.value)}if(t&&(t.type==="select"||t.type==="treeselect")&&(t.options||_.value[t.field])){const a=t,l=a.remote?_.value[t.field]:a.options;try{if(t.type==="treeselect"){const n=j(t);return Array.isArray(r.value)?ge(r.value,l||[],n):be(r.value,l||[],n)}else{if(Array.isArray(r.value))return r.value.map(f=>{const h=v(l||[],f,"value");return h?h.label:String(f)}).filter(f=>f!==void 0&&f!=="undefined"&&f!=="null"&&f!=="").join(", ")||(r.value.length?r.value.join(", "):"");{const n=v(l||[],r.value,"value");return(n?n.label:String(r.value))||String(r.value)}}}catch(n){return console.error("Error processing select/treeselect display value:",n),Array.isArray(r.value)?r.value.join(", "):String(r.value)}}if(t&&(t.type==="radio"||t.type==="checkbox")&&t.options)try{if(Array.isArray(r.value))return r.value.map(a=>{var n;const l=(n=t.options)==null?void 0:n.find(c=>c.value===a);return l?l.label:a}).join(", ");{const a=t.options.find(l=>l.value===r.value);return a?a.label:r.value}}catch(a){return console.error("Error processing radio/checkbox display value:",a),Array.isArray(r.value)?r.value.join(", "):String(r.value)}if(t&&t.type==="daterange"&&Array.isArray(r.value))try{if(r.value.length===2){const[a,l]=r.value;if(a!==null&&l!==null)return`${V(a)} ~ ${V(l)}`;if(a!==null)return`≥ ${V(a)}`;if(l!==null)return`≤ ${V(l)}`}return""}catch(a){return console.error("Error processing daterange display value:",a),""}if(t&&t.type==="date")try{return r.value?V(r.value):""}catch(a){return console.error("Error processing date display value:",a),""}if(t&&t.type==="numberrange"&&Array.isArray(r.value))try{const[a,l]=r.value;return a!==null&&l!==null?`${a} - ${l}`:a!==null?`≥ ${a}`:l!==null?`≤ ${l}`:""}catch(a){return console.error("Error processing numberrange display value:",a),""}if(t&&t.type==="timerange"&&Array.isArray(r.value))try{const[a,l]=r.value;return a&&l?`${a} ~ ${l}`:a?`≥ ${a}`:l?`≤ ${l}`:""}catch(a){return console.error("Error processing timerange display value:",a),""}if(t&&t.type==="time")try{return r.value?String(r.value):""}catch(a){return console.error("Error processing time display value:",a),""}return String(r.value)},V=r=>{if(r instanceof Date)return r.toLocaleDateString();if(typeof r=="string"||typeof r=="number"){const t=new Date(r);return isNaN(t.getTime())?String(r):t.toLocaleDateString()}return String(r)},N=r=>{if(r===d.quickSearchField)u.value="";else{const t=d.searchConfig.formItems.find(a=>a.field===r);if(t)if(t.type==="checkbox")s.value[r]=[];else if(t.type==="daterange"||t.type==="numberrange")s.value[r]=[];else if(t.type==="select"||t.type==="treeselect"){const a=t;s.value[r]=a.multiple?[]:""}else t.type==="number"?s.value[r]=null:t.type==="timerange"?s.value[r]=[]:t.type==="time"?s.value[r]=null:s.value[r]="";else s.value[r]=""}M()},T=()=>{u.value="",W()},_e=async()=>{const r=[];for(const t of d.searchConfig.formItems)if((t.type==="select"||t.type==="treeselect")&&t.loadOptions){const a=t,l=(async()=>{try{const n=await a.loadOptions();_.value[t.field]=n}catch(n){console.error(`Failed to load options for ${t.field}:`,n)}})();r.push(l)}r.length>0&&(await Promise.all(r),m.value.length>0&&(b&&clearTimeout(b),b=window.setTimeout(()=>{e.nextTick(()=>{K()})},100)))},p=(r,t,a)=>{const l={};if(r.hasOwnProperty("elProps")){const n=r;n.elProps&&(typeof n.elProps=="function"?Object.assign(l,n.elProps(t,a)):typeof n.elProps=="object"&&n.elProps[t]?Object.assign(l,n.elProps[t]):typeof n.elProps=="object"&&!Array.isArray(n.elProps)&&Object.keys(n.elProps).length>0&&Object.assign(l,n.elProps))}return l};return e.watch(()=>d.modelValue,r=>{if(r){u.value=r[d.quickSearchField]||"";const t={...s.value};let a=!1;Object.keys(r).forEach(l=>{if(l!==d.quickSearchField){const n=d.searchConfig.formItems.find(c=>c.field===l);if(n&&n.type==="checkbox"&&!Array.isArray(r[l]))t[l]=r[l]?[r[l]]:[],a=!0;else if(n&&n.type==="daterange"&&r[l])Array.isArray(r[l])?(t[l]=r[l].map(c=>{if(c instanceof Date)return c;if(typeof c=="string"||typeof c=="number"){const f=new Date(c);return isNaN(f.getTime())?c:f}return c}),a=!0):(t[l]=[],a=!0);else if(n&&n.type==="numberrange"&&r[l])Array.isArray(r[l])?(t[l]=r[l],a=!0):(t[l]=[null,null],a=!0);else if(n&&n.type==="number"){let c=r[l];typeof c=="string"&&c!==""&&!isNaN(Number(c))?c=Number(c):(c===""||c===void 0)&&(c=null),t[l]!==c&&(t[l]=c,a=!0)}else n&&n.type==="timerange"&&r[l]?Array.isArray(r[l])?(t[l]=r[l],a=!0):(t[l]=[],a=!0):n&&n.type==="time"?t[l]!==r[l]&&(t[l]=r[l],a=!0):n&&n.type==="custom"&&typeof n.default=="number"&&r[l]===""?(t[l]=n.default,a=!0):t[l]!==r[l]&&(t[l]=r[l],a=!0)}}),a&&(s.value=t),B(r)}},{immediate:!0,deep:!0}),e.onMounted(()=>{const r={},t={};for(const l of d.searchConfig.formItems)if(l.type==="custom")r[l.field]=l.default!==void 0?l.default:"";else if(l.type==="checkbox")r[l.field]=Array.isArray(l.default)?l.default:[];else if(l.type==="treeselect"){const n=l;r[l.field]=n.multiple?Array.isArray(l.default)?l.default:[]:l.default??""}else if(l.type==="select"){const n=l;r[l.field]=n.multiple?Array.isArray(l.default)?l.default:[]:l.default??""}else l.type==="daterange"?r[l.field]=Array.isArray(l.default)?l.default:[]:l.type==="numberrange"?r[l.field]=Array.isArray(l.default)?l.default:[null,null]:l.type==="textarea"?(r[l.field]=l.default??"",t[l.field]=!1):l.type==="number"?r[l.field]=l.default??null:l&&l.type==="timerange"?r[l.field]=Array.isArray(l.default)?l.default:[]:l&&l.type==="time"?r[l.field]=l.default??null:r[l.field]=l.default??"";s.value=r,k.value=t;const a=pe();if(a){u.value=a[d.quickSearchField]||"",Object.keys(a).forEach(n=>{if(n!==d.quickSearchField){const c=d.searchConfig.formItems.find(f=>f.field===n);if(c&&c.type==="checkbox"&&!Array.isArray(a[n]))r[n]=a[n]?[a[n]]:[];else if(c&&c.type==="date"&&a[n])if(typeof a[n]=="string"||typeof a[n]=="number"){const f=new Date(a[n]);r[n]=isNaN(f.getTime())?a[n]:f}else r[n]=a[n];else c&&c.type==="daterange"&&a[n]?Array.isArray(a[n])?r[n]=a[n].map(f=>{if(f instanceof Date)return f;if(typeof f=="string"||typeof f=="number"){const h=new Date(f);return isNaN(h.getTime())?f:h}return f}):r[n]=[]:c&&c.type==="numberrange"&&a[n]?Array.isArray(a[n])?r[n]=a[n]:r[n]=[null,null]:c&&c.type==="timerange"&&a[n]?Array.isArray(a[n])?r[n]=a[n]:r[n]=[]:(c&&c.type==="time"&&a[n],r[n]=a[n])}}),s.value=r;const l={};u.value&&(l[d.quickSearchField]=u.value),Object.assign(l,s.value),B(l),y("update:modelValue",l),y("search",l)}_e()}),(r,t)=>{const a=e.resolveComponent("el-input"),l=e.resolveComponent("el-button"),n=e.resolveComponent("el-option"),c=e.resolveComponent("el-select"),f=e.resolveComponent("el-tree-select"),h=e.resolveComponent("el-radio"),ke=e.resolveComponent("el-radio-group"),Se=e.resolveComponent("el-checkbox"),xe=e.resolveComponent("el-checkbox-group"),G=e.resolveComponent("el-date-picker"),E=e.resolveComponent("el-input-number"),z=e.resolveComponent("el-time-picker"),H=e.resolveComponent("el-form-item"),ve=e.resolveComponent("el-col"),Ve=e.resolveComponent("el-row"),Ce=e.resolveComponent("el-popover"),Q=e.resolveComponent("el-tag");return e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Z,[e.createVNode(a,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),placeholder:r.quickSearchPlaceholder,class:"quick-search-input",onKeyup:e.withKeys(L,["enter"])},null,8,["modelValue","placeholder"]),e.createVNode(l,{type:"primary",icon:"Search",onClick:L,class:"search-button"},{default:e.withCtx(()=>t[2]||(t[2]=[e.createTextVNode(" 搜索 ",-1)])),_:1,__:[2]}),e.createElementVNode("div",ee,[O.value?(e.openBlock(),e.createBlock(Ce,{key:0,visible:x.value,"onUpdate:visible":t[1]||(t[1]=o=>x.value=o),placement:"bottom-end",width:ie.value,trigger:"click","popper-class":"advanced-search-popover",teleported:!0,"hide-after":0,persistent:!1,"show-arrow":!1},{reference:e.withCtx(()=>[O.value?(e.openBlock(),e.createBlock(l,{key:0,ref:"filterButtonRef",onClick:he,icon:x.value?"ArrowUp":"ArrowDown",class:"filter-button"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(x.value?"收起筛选":"更多筛选"),1)]),_:1},8,["icon"])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",le,[e.createVNode(e.unref(X.ElForm),{ref_key:"advancedFormRef",ref:se,model:s.value,"label-width":r.searchConfig.labelWidth||"100px",inline:r.searchConfig.inline!==!1,class:"advanced-form"},{default:e.withCtx(()=>[e.createVNode(Ve,{gutter:20},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ce.value,o=>(e.openBlock(),e.createBlock(ve,{key:o.field,span:24/(r.searchConfig.itemsPerRow||2),class:"advanced-form-item-col"},{default:e.withCtx(()=>[e.createVNode(H,{label:o.label,prop:o.field,class:"advanced-form-item"},{default:e.withCtx(()=>[o.type==="input"||!o.type?(e.openBlock(),e.createBlock(a,e.mergeProps({key:0,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.placeholder||`请输入${o.label}`,clearable:o.clearable!==!1,class:"form-item-input"},{ref_for:!0},p(o,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable"])):o.type==="textarea"?(e.openBlock(),e.createElementBlock("div",{key:1,class:"textarea-container","data-field":o.field},[e.withDirectives(e.createVNode(a,e.mergeProps({modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.shortPlaceholder||o.placeholder||`请输入${o.label}`,clearable:o.clearable!==!1,class:"form-item-input",onFocus:i=>de(o.field)},{ref_for:!0},p(o,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","onFocus"]),[[e.vShow,!k.value[o.field]]]),e.withDirectives(e.createVNode(a,e.mergeProps({modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.longPlaceholder||o.placeholder||`请输入${o.label}`,clearable:o.clearable!==!1,type:"textarea",autosize:{minRows:2,maxRows:4},class:"form-item-textarea-overlay",teleported:!0,onBlur:()=>{k.value[o.field]=!1}},{ref_for:!0},p(o,"input")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","onBlur"]),[[e.vShow,k.value[o.field]]])],8,re)):o.type==="select"?(e.openBlock(),e.createBlock(c,e.mergeProps({key:2,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.placeholder||`请选择${o.label}`,clearable:o.clearable!==!1,multiple:o.multiple,filterable:o.filterable,remote:o.remote,"remote-method":o.remote?ue(o):void 0,loading:A.value[o.field]||!1,class:"form-item-select",teleported:!1,"reserve-keyword":""},{ref_for:!0},p(o,"select")),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(q(o),i=>(e.openBlock(),e.createBlock(n,e.mergeProps({key:i.value,label:i.label,value:i.value},{ref_for:!0},p(o,"option",i)),null,16,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","placeholder","clearable","multiple","filterable","remote","remote-method","loading"])):o.type==="treeselect"?(e.openBlock(),e.createBlock(f,e.mergeProps({key:3,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.placeholder||`请选择${o.label}`,clearable:o.clearable!==!1,multiple:o.multiple,data:fe(o),"node-key":o.nodeKey||"id",props:j(o),"show-checkbox":o.showCheckbox,filterable:o.filterable,teleported:!1,"popper-options":{placement:"bottom-start"},style:{"--el-tree-select-dropdown-max-height":(o.maxDropdownHeight||300)+"px"},"render-after-expand":!1,loading:A.value[o.field]||!1},{ref_for:!0},p(o,"treeSelect")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","multiple","data","node-key","props","show-checkbox","filterable","style","loading"])):o.type==="radio"?(e.openBlock(),e.createBlock(ke,e.mergeProps({key:4,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,class:"form-item-radio"},{ref_for:!0},p(o,"radioGroup")),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.options,i=>(e.openBlock(),e.createBlock(h,e.mergeProps({key:i.value,value:i.value,class:"form-item-radio-option"},{ref_for:!0},p(o,"radio",i)),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.label),1)]),_:2},1040,["value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):o.type==="checkbox"?(e.openBlock(),e.createBlock(xe,e.mergeProps({key:5,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,class:"form-item-checkbox"},{ref_for:!0},p(o,"checkboxGroup")),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.options,i=>(e.openBlock(),e.createBlock(Se,e.mergeProps({key:i.value,value:i.value,class:"form-item-checkbox-option"},{ref_for:!0},p(o,"checkbox",i)),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.label),1)]),_:2},1040,["value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):o.type==="date"?(e.openBlock(),e.createBlock(G,e.mergeProps({key:6,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,type:"date",placeholder:o.placeholder||`请选择${o.label}`,clearable:o.clearable!==!1,class:"form-item-date",teleported:!1},{ref_for:!0},p(o,"datePicker")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable"])):o.type==="daterange"?(e.openBlock(),e.createBlock(G,e.mergeProps({key:7,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,type:"daterange","start-placeholder":o.startPlaceholder||"开始日期","end-placeholder":o.endPlaceholder||"结束日期",clearable:o.clearable!==!1,class:"form-item-daterange",teleported:!1,"range-separator":"至"},{ref_for:!0},p(o,"datePicker")),null,16,["modelValue","onUpdate:modelValue","start-placeholder","end-placeholder","clearable"])):o.type==="number"?(e.openBlock(),e.createBlock(E,e.mergeProps({key:8,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,min:o.min,max:o.max,placeholder:o.placeholder||`请输入${o.label}`,"controls-position":o.controlsPosition||"right",class:"form-item-number"},{ref_for:!0},p(o,"inputNumber")),null,16,["modelValue","onUpdate:modelValue","min","max","placeholder","controls-position"])):o.type==="numberrange"?(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(E,e.mergeProps({"model-value":U(o.field,0),min:o.min,max:o.max,placeholder:o.minPlaceholder||"最小值","controls-position":o.controlsPosition||"right",class:"form-item-number","onUpdate:modelValue":i=>D(o.field,0,i??null)},{ref_for:!0},p(o,"inputNumber")),null,16,["model-value","min","max","placeholder","controls-position","onUpdate:modelValue"]),t[3]||(t[3]=e.createElementVNode("span",{class:"range-separator"},"-",-1)),e.createVNode(E,e.mergeProps({"model-value":U(o.field,1),min:o.min,max:o.max,placeholder:o.maxPlaceholder||"最大值","controls-position":o.controlsPosition||"right",class:"form-item-number","onUpdate:modelValue":i=>D(o.field,1,i??null)},{ref_for:!0},p(o,"inputNumber")),null,16,["model-value","min","max","placeholder","controls-position","onUpdate:modelValue"])])):o.type==="time"?(e.openBlock(),e.createBlock(z,e.mergeProps({key:10,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,placeholder:o.placeholder||`请选择${o.label}`,clearable:o.clearable!==!1,format:o.format,class:"form-item-time",teleported:!1},{ref_for:!0},p(o,"timePicker")),null,16,["modelValue","onUpdate:modelValue","placeholder","clearable","format"])):o.type==="timerange"?(e.openBlock(),e.createBlock(z,e.mergeProps({key:11,modelValue:s.value[o.field],"onUpdate:modelValue":i=>s.value[o.field]=i,"is-range":"","start-placeholder":o.startPlaceholder||"开始时间","end-placeholder":o.endPlaceholder||"结束时间",clearable:o.clearable!==!1,format:o.format,class:"form-item-timerange",teleported:!1,"range-separator":"至"},{ref_for:!0},p(o,"timePicker")),null,16,["modelValue","onUpdate:modelValue","start-placeholder","end-placeholder","clearable","format"])):o.type==="custom"?e.renderSlot(r.$slots,o.slotName||o.field,{key:12,model:s.value,field:o.field},void 0,!0):e.createCommentVNode("",!0)]),_:2},1032,["label","prop"])]),_:2},1032,["span"]))),128))]),_:3}),e.createVNode(H,{class:"advanced-form-actions","label-width":r.searchConfig.labelWidth||"100px",label:" "},{default:e.withCtx(()=>[e.createVNode(l,{type:"primary",icon:"Search",onClick:M},{default:e.withCtx(()=>t[4]||(t[4]=[e.createTextVNode(" 搜索 ",-1)])),_:1,__:[4]}),e.createVNode(l,{onClick:W,icon:"Refresh"},{default:e.withCtx(()=>t[5]||(t[5]=[e.createTextVNode(" 重置 ",-1)])),_:1,__:[5]})]),_:1},8,["label-width"])]),_:3},8,["model","label-width","inline"])])]),_:3},8,["visible","width"])):e.createCommentVNode("",!0)])]),e.renderSlot(r.$slots,"search-tags",{tags:m.value,removeTag:N,clearAll:T},()=>[m.value.length>0&&!$.value?(e.openBlock(),e.createElementBlock("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,o=>(e.openBlock(),e.createBlock(Q,{key:o.key,closable:"",onClose:i=>N(o.key),class:"search-tag"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.label)+": "+e.toDisplayString(J(o)),1)]),_:2},1032,["onClose"]))),128)),e.createVNode(l,{type:"primary",link:"",onClick:T,class:"clear-all-tags"},{default:e.withCtx(()=>t[6]||(t[6]=[e.createTextVNode(" 清除所有 ",-1)])),_:1,__:[6]})])):e.createCommentVNode("",!0)],!0),$.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:d.teleportTo},[e.renderSlot(r.$slots,"teleported-search-tags",{tags:m.value,removeTag:N,clearAll:T},()=>[m.value.length>0?(e.openBlock(),e.createElementBlock("div",ae,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,o=>(e.openBlock(),e.createBlock(Q,{key:o.key,closable:"",onClose:i=>N(o.key),class:"search-tag"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.label)+": "+e.toDisplayString(J(o)),1)]),_:2},1032,["onClose"]))),128)),e.createVNode(l,{type:"primary",link:"",onClick:T,class:"clear-all-tags"},{default:e.withCtx(()=>t[7]||(t[7]=[e.createTextVNode(" 清除所有 ",-1)])),_:1,__:[7]})])):e.createCommentVNode("",!0)],!0)],8,["to"])):e.createCommentVNode("",!0)])}}}),Ae="",Pe="",I=((C,w)=>{const b=C.__vccOpts||C;for(const[d,y]of w)b[d]=y;return b})(ne,[["__scopeId","data-v-555cd158"]]);g.ElementAdvancedSearch=I,g.default=I,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
